{% extends 'secretary_dash/base.html' %}

{% block content %}
    <h1>Appointment Calendar</h1>
    
    <div class="calendar-nav">
        <a href="?start_date={{ prev_week|date:'Y-m-d' }}">&lt; Previous Week</a>
        <span>{{ start_date|date:'F d' }} - {{ end_date|date:'F d, Y' }}</span>
        <a href="?start_date={{ next_week|date:'Y-m-d' }}">Next Week &gt;</a>
    </div>

    <div class="calendar">
        {% for date, appointments in appointment_days.items %}
            <div class="day">
                <h3>{{ date|date:'l, F d' }}</h3>
                {% for appointment in appointments %}
                    <div class="appointment">
                        <time>{{ appointment.time|time:'H:i' }}</time>
                        <span>{{ appointment.patient }}</span>
                        {% if not appointment.is_cancelled %}
                            <a href="{% url 'cancel_appointment' appointment.id %}">Cancel</a>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% empty %}
            <p>No appointments scheduled for this week.</p>
        {% endfor %}
    </div>
{% endblock %} 